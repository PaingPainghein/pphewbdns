<!doctype html>
<html lang="my" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PPH MVPN FREE2026 DNS CREATOR</title>
  <style>
    :root{
      --fg:#0b1220; --muted:#5b6b84; --line:#d8e3ee;
      --accent:#14b8a6; --accent-ink:#0ea5e9;
      --ok:#10b981; --ok-bright:#059669;
      --warn:#f59e0b; --err:#ef4444;
      --time:#8b5cf6; --loc:#06b6d4;
      --bg1:#eef2ff; --bg2:#e0fbff; --bg3:#fae8ff;
      --card:#ffffffc9; --card-tint:#f8fafc;
      --tri: linear-gradient(90deg, #14b8a6 0%, #06b6d4 50%, #6366f1 100%);
      --shadow-strong: 0 10px 18px rgba(11,18,32,.12);
      --shadow-soft: 0 5px 12px rgba(11,18,32,.08);
      --table-row:#fff;
      --grain:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='140' height='140' viewBox='0 0 140 140'><filter id='f'><feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='2' stitchTiles='stitch'/><feColorMatrix type='saturate' values='0'/><feComponentTransfer><feFuncA type='linear' slope='0.035'/></feComponentTransfer></filter><rect width='100%' height='100%' filter='url(#f)'/></svg>");
    }
    [data-theme="dark"]{
      --fg:#e5eefc; --muted:#9fb1c9; --line:#223043;
      --accent:#5eead4; --accent-ink:#7dd3fc;
      --ok:#34d399; --ok-bright:#34d399;
      --time:#c4b5fd; --loc:#67e8f9;
      --bg1:#06131f; --bg2:#0a1c2c; --bg3:#0e1f3b;
      --card:#0f1a2ae6; --card-tint:#0b1422;
      --warn:#fbbf24; --err:#f87171;
      --shadow-strong: 0 10px 18px rgba(0,0,0,.45);
      --shadow-soft: 0 5px 12px rgba(0,0,0,.35);
      --table-row:#0c1423;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      color:var(--fg);
      background:
        radial-gradient(1200px 700px at 15% 0%, var(--bg1) 0%, transparent 60%),
        radial-gradient(1300px 800px at 90% 20%, var(--bg2) 0%, transparent 55%),
        radial-gradient(900px 600px at 50% 110%, var(--bg3) 0%, transparent 50%),
        linear-gradient(160deg,#f8fafc 0%, #eff6ff 40%, #f0f9ff 100%);
      min-height:100vh; display:flex; align-items:start; justify-content:center; padding:10px;
      transition: background .3s ease, color .2s ease;
    }
    body::after{ content:""; position:fixed; inset:0; pointer-events:none; background-image:var(--grain); mix-blend-mode:multiply; opacity:.22; }
    [data-theme="dark"] body{
      background:
        radial-gradient(1400px 700px at 10% -10%, var(--bg1) 0%, transparent 60%),
        radial-gradient(1400px 800px at 100% 30%, var(--bg2) 0%, transparent 55%),
        radial-gradient(900px 600px at 50% 110%, var(--bg3) 0%, transparent 50%),
        linear-gradient(160deg,#05121a 0%, #0a1826 50%, #0c2036 100%);
    }
    .wrap{width:100%;max-width:680px;display:flex;flex-direction:column;gap:12px}
    .card{
      background: linear-gradient(180deg,var(--card) 0%,var(--card-tint) 100%);
      backdrop-filter:blur(12px);
      border:1px solid var(--line); border-radius:12px;
      box-shadow:var(--shadow-strong); padding:16px 14px;
    }
    h1{font-size:19px;margin-bottom:4px;display:flex;align-items:center;gap:8px;font-weight:800}
    h2{font-size:16px;margin-bottom:8px;font-weight:700}
    .byline{color:var(--accent-ink);font-weight:800;margin-bottom:8px;font-size:12px}
    .logo{width:22px;height:22px;border-radius:6px;overflow:hidden;display:inline-block}
    .logo img{width:100%;height:100%;object-fit:cover}
    form{display:grid;gap:10px}
    .row{display:grid;gap:5px}
    label{color:var(--muted);font-size:12px;font-weight:600}
    input,select{
      width:100%;height:36px;padding:8px 10px;border:1px solid var(--line);border-radius:10px;
      font-size:14px;background:#fff;color:#0b1220;outline:none;transition:all .2s;
    }
    [data-theme="dark"] input,[data-theme="dark"] select{background:#0b1422;color:var(--fg);border-color:#1f2a38}
    input:focus,select:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(20,184,166,.15)}
    .btns{display:flex;gap:8px;margin-top:6px;flex-wrap:wrap}
    button{
      height:36px;border-radius:10px;font-weight:800;cursor:pointer;border:0;padding:0 16px;
      background-image:var(--tri); background-size:200% 100%; color:#fff; box-shadow:0 4px 10px rgba(11,18,32,.15);
      transition: all .2s; font-size:14px;flex:1;
    }
    button:hover{transform:translateY(-2px); background-position:right center}
    .btn-mini{height:30px;padding:0 12px;border-radius:8px;font-weight:700;font-size:12px;min-width:60px}
    .btn-edit{background:#6366f1}
    .btn-delete{background:#ef4444}
    #msg,#loginMsg{
      margin-top:8px;padding:10px;border-radius:10px;border:1px solid var(--line);
      background:#f8fafc;min-height:30px;white-space:pre-wrap;color:#0b1220;font-size:13px;font-weight:600;
    }
    [data-theme="dark"] #msg,[data-theme="dark"] #loginMsg{ background:#0b1422; color:#e5eefc; border-color:#1f2a38; }
    .msg-ok{border-color:var(--ok)!important;background:#ecfdf5!important;color:var(--ok-bright)!important}
    .msg-err{border-color:var(--err)!important;background:#fef2f2!important;color:#dc2626!important}
    .switch{position:relative;display:inline-flex;align-items:center;gap:8px;cursor:pointer}
    .slider{ width:40px;height:22px;border-radius:999px;background:#e5e7eb;border:1px solid #d1d5db; transition:background .2s }
    [data-theme="dark"] .slider{ background:#0b1422; border-color:#1f2a38 }
    .slider::after{ content:"";position:absolute;top:2px;left:2px;width:18px;height:18px;background:#fff;border-radius:999px;transition:left .2s }
    .switch input:checked + .slider{ background:var(--accent) }
    .switch input:checked + .slider::after{left:20px}
    .table-wrap{overflow-x:auto;margin-top:8px}
    .table{width:100%;border-collapse:separate;border-spacing:0 6px;min-width:600px}
    .table thead th{text-align:left;font-size:11px;color:var(--muted);padding:8px 10px;font-weight:600}
    .table tbody tr{background:var(--table-row);border:1px solid var(--line);border-radius:10px;box-shadow:var(--shadow-soft);height:56px;transition:transform .15s}
    .table tbody tr:hover{transform:translateY(-1px);box-shadow:0 6px 14px rgba(11,18,32,.12)}
    .table td{padding:0 10px;font-size:13px;vertical-align:middle}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono",monospace;font-size:12px}
    .actions{display:flex;gap:6px;justify-content:flex-end}
    .theme-fab,.logout-fab{
      position:fixed;z-index:9999;width:44px;height:44px;border-radius:999px;
      background-image:var(--tri); color:#fff; border:0; box-shadow:0 6px 16px rgba(0,0,0,.2); cursor:pointer;transition:all .2s;
    }
    .theme-fab{right:16px;bottom:16px}
    .logout-fab{top:16px;right:16px}
    .theme-fab:hover,.logout-fab:hover{transform:scale(1.1)}
    .gate{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:16px;z-index:10000;background:rgba(0,0,0,0.5);backdrop-filter:blur(10px)}
    .gate-card{width:100%;max-width:360px;border:1px solid var(--line);border-radius:14px;padding:24px;background:var(--card);box-shadow:var(--shadow-strong);backdrop-filter:blur(12px)}
    .gate-title{display:flex;align-items:center;gap:10px;font-weight:900;font-size:20px;margin-bottom:16px;justify-content:center}
    .hide{display:none!important}
  </style>
</head>
<body>

  <!-- Login Gate -->
  <div id="gate" class="gate">
    <div class="gate-card">
      <div class="gate-title">
        <span class="logo"><img alt="logo" src="https://play-lh.googleusercontent.com/tUt7o9JtLGGEzSo6kOXdJ8MpYAGhBUYEV2yoIGn4jtVA4WNQPfksB5ze8E29WpcrOdTgMVxuDygxFvtATiWS=w240-h480-rw"></span>
        <span>PPH MVPN FREE2026 DNS Manager</span>
      </div>
      <form id="loginForm" autocomplete="off">
        <div class="row">
          <label for="loginUser">Username</label>
          <input id="loginUser" type="text" placeholder="Username" required />
        </div>
        <div class="row">
          <label for="loginPass">Password</label>
          <input id="loginPass" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" required />
        </div>
        <div class="btns"><button type="submit">Login</button></div>
        <div id="loginMsg"></div>
      </form>
    </div>
  </div>

  <div class="wrap hide" id="appWrap">
    <!-- Status -->
    <div class="card status">
      <h2>Status</h2>
      <div class="items">
        <div class="pillstat"><div class="k">Your IP</div><div id="yourIp" class="v mono">â€”</div></div>
        <div class="pillstat"><div class="k">Location</div><div id="yourLoc" class="v">â€”</div></div>
      </div>
    </div>

    <!-- DNS Form -->
    <div class="card">
      <h1><span class="logo"><img alt="logo" src="https://play-lh.googleusercontent.com/tUt7o9JtLGGEzSo6kOXdJ8MpYAGhBUYEV2yoIGn4jtVA4WNQPfksB5ze8E29WpcrOdTgMVxuDygxFvtATiWS=w240-h480-rw"></span> PPH MVPN FREE2026 DNS CREATOR</h1>
      <p class="byline">Power By : PPH DEX MVPN 2025</p>

      <form id="dnsForm">
        <input type="hidden" id="editId" value="" />
        <div class="row">
          <label for="type">Type</label>
          <select id="type" required>
            <option value="A">A</option>
            <option value="AAAA">AAAA</option>
            <option value="CNAME">CNAME</option>
            <option value="MX">MX</option>
            <option value="TXT">TXT</option>
            <option value="SRV">SRV</option>
            <option value="CAA">CAA</option>
          </select>
        </div>
        <div class="row">
          <label for="host">Host (sub or @)</label>
          <input id="host" type="text" placeholder="app or @" required />
        </div>
        <div class="row">
          <label for="content">Content</label>
          <input id="content" type="text" placeholder="e.g. 1.1.1.1" required />
        </div>
        <div class="row">
          <label>Proxy through Cloudflare</label>
          <label class="switch">
            <input id="proxied" type="checkbox" checked />
            <span class="slider"></span>
          </label>
        </div>
        <div class="btns">
          <button type="submit" id="submitBtn">Add Record</button>
          <button type="button" id="cancelEdit" class="btn-mini hide">Cancel</button>
        </div>
        <div id="msg"></div>
      </form>
    </div>

    <!-- Records Table -->
    <div class="card">
      <h2>DNS Records</h2>
      <div class="row">
        <label for="searchName">Search</label>
        <input id="searchName" placeholder="e.g. app or app.mvpnpvpn.de5.net" />
      </div>
      <div class="btns">
        <button type="button" id="searchBtn">Search</button>
        <button type="button" id="clearBtn">Clear</button>
      </div>

      <div class="table-wrap">
        <table class="table">
          <thead>
            <tr>
              <th>Type</th>
              <th>Name</th>
              <th>Content</th>
              <th>Proxy</th>
              <th style="text-align:right">Actions</th>
            </tr>
          </thead>
          <tbody id="recordsBody"></tbody>
        </table>
      </div>
    </div>

    <div style="text-align:center;padding:12px;font-size:12px;color:var(--muted)">
      Developer : PPH DEX MVPN 2025
    </div>
  </div>

  <!-- Theme & Logout -->
  <button id="themeToggle" class="theme-fab hide">
    <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"/></svg>
    <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
  </button>

  <button id="logoutFab" class="logout-fab hide">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 16l4-4m0 0l-4-4m4 4H7"/></svg>
  </button>

  <script>
    const API_BASE = "https://pphdevweb.painghein556.workers.dev/dns";
    const ROOT_DOMAIN = "mvpnpvpn.de5.net";

    const gate = document.getElementById("gate");
    const appWrap = document.getElementById("appWrap");
    const loginMsg = document.getElementById("loginMsg");
    const msg = document.getElementById("msg");
    const submitBtn = document.getElementById("submitBtn");
    const cancelEdit = document.getElementById("cancelEdit");
    const editIdInput = document.getElementById("editId");

    function getAuthHeader() {
      const token = localStorage.getItem("dnsapi_auth");
      return token ? { "Authorization": `Basic ${token}` } : {};
    }

    // Auto login
    (function() {
      const token = localStorage.getItem("dnsapi_auth");
      if (token) {
        fetch(API_BASE + "?per_page=1", { headers: getAuthHeader() })
          .then(r => r.ok && showApp())
          .catch(() => localStorage.removeItem("dnsapi_auth"));
      }
    })();

    // Login
    document.getElementById("loginForm").onsubmit = e => {
      e.preventDefault();
      const user = document.getElementById("loginUser").value.trim();
      const pass = document.getElementById("loginPass").value;
      const token = btoa(`${user}:${pass}`);
      localStorage.setItem("dnsapi_auth", token);

      fetch(API_BASE + "?per_page=1", { headers: { "Authorization": `Basic ${token}` } })
        .then(r => {
          if (r.ok) {
            loginMsg.textContent = "Login á€¡á€±á€¬á€„á€ºá€™á€¼á€„á€ºá€•á€«á€•á€¼á€® âœ…";
            loginMsg.className = "msg-ok";
            showApp();
            loadStatus();
            searchRecords();
          } else throw "";
        })
        .catch(() => {
          localStorage.removeItem("dnsapi_auth");
          loginMsg.textContent = "Username á€žá€­á€¯á€·á€™á€Ÿá€¯á€á€º Password á€™á€™á€¾á€”á€ºá€•á€« âŒ";
          loginMsg.className = "msg-err";
        });
    };

    function showApp() {
      gate.classList.add("hide");
      appWrap.classList.remove("hide");
      document.getElementById("themeToggle").classList.remove("hide");
      document.getElementById("logoutFab").classList.remove("hide");
    }

    document.getElementById("logoutFab").onclick = () => {
      localStorage.removeItem("dnsapi_auth");
      location.reload();
    };

    // Theme
    (function() {
      const saved = localStorage.getItem("theme");
      if (saved) document.documentElement.setAttribute("data-theme", saved);
    })();
    document.getElementById("themeToggle").onclick = () => {
      const cur = document.documentElement.getAttribute("data-theme") || "light";
      const next = cur === "light" ? "dark" : "light";
      document.documentElement.setAttribute("data-theme", next);
      localStorage.setItem("theme", next);
    };

    // Status
    async function loadStatus() {
      try {
        const r = await fetch("https://1.1.1.1/cdn-cgi/trace");
        const text = await r.text();
        const map = Object.fromEntries(text.trim().split("\n").map(l => l.split("=")));
        document.getElementById("yourIp").textContent = map.ip || "â€”";
        document.getElementById("yourLoc").textContent = map.loc || "â€”";
      } catch {}
    }

    // Form Submit (Add or Update)
    document.getElementById("dnsForm").onsubmit = async e => {
      e.preventDefault();
      let name = document.getElementById("host").value.trim();
      const type = document.getElementById("type").value;
      const content = document.getElementById("content").value.trim();
      const proxied = document.getElementById("proxied").checked;
      const editId = editIdInput.value;

      if (!name) name = "@";
      if (!name.endsWith("." + ROOT_DOMAIN)) name += "." + ROOT_DOMAIN;

      const payload = { type, name, content, proxied, ttl: 1 };

      try {
        let res;
        if (editId) {
          // Update (PATCH)
          res = await fetch(API_BASE + "/" + editId, {
            method: "PATCH",
            headers: { "Content-Type": "application/json", ...getAuthHeader() },
            body: JSON.stringify(payload)
          });
        } else {
          // Add (POST)
          res = await fetch(API_BASE, {
            method: "POST",
            headers: { "Content-Type": "application/json", ...getAuthHeader() },
            body: JSON.stringify([payload])
          });
        }

        const data = await res.json();
        if (data.success) {
          msg.textContent = editId ? "Updated successfully âœ…" : "Added successfully âœ…";
          msg.className = "msg-ok";
          dnsForm.reset();
          cancelEditMode();
          searchRecords();
        } else {
          msg.textContent = "Failed âŒ " + (data.errors?.[0]?.message || "");
          msg.className = "msg-err";
        }
      } catch {
        msg.textContent = "Network error";
        msg.className = "msg-err";
      }
    };

    // Edit button
    window.editRecord = rec => {
      document.getElementById("type").value = rec.type;
      document.getElementById("host").value = rec.name.replace("." + ROOT_DOMAIN, "") === "@" ? "@" : rec.name.replace("." + ROOT_DOMAIN, "");
      document.getElementById("content").value = rec.content;
      document.getElementById("proxied").checked = rec.proxied;
      editIdInput.value = rec.id;

      submitBtn.textContent = "Update Record";
      cancelEdit.classList.remove("hide");
      msg.textContent = "Editing: " + rec.name;
      msg.className = "msg-warn";
      window.scrollTo(0, 0);
    };

    // Cancel edit
    cancelEdit.onclick = () => {
      cancelEditMode();
      dnsForm.reset();
      msg.textContent = "";
    };

    function cancelEditMode() {
      editIdInput.value = "";
      submitBtn.textContent = "Add Record";
      cancelEdit.classList.add("hide");
    }

    // Delete
    window.deleteRecord = async id => {
      if (!confirm("á€’á€® record á€€á€­á€¯ á€–á€»á€€á€ºá€™á€¾á€¬á€œá€¬á€¸?")) return;
      try {
        await fetch(API_BASE + "/" + id, { method: "DELETE", headers: getAuthHeader() });
        searchRecords();
      } catch {}
    };

    // Search
    async function searchRecords() {
      let url = API_BASE + "?per_page=200";
      const query = document.getElementById("searchName").value.trim();
      if (query) {
        const name = query.includes(".") ? query : query + "." + ROOT_DOMAIN;
        url += "&name=" + encodeURIComponent(name);
      }

      try {
        const res = await fetch(url, { headers: getAuthHeader() });
        const data = await res.json();
        const tbody = document.getElementById("recordsBody");
        tbody.innerHTML = "";

        if (data.result?.length) {
          data.result.forEach(rec => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
              <td>${rec.type}</td>
              <td class="mono">${rec.name}</td>
              <td class="mono">${rec.content}</td>
              <td>${rec.proxied ? "ðŸŸ  Proxied" : "âš« DNS Only"}</td>
              <td class="actions">
                <button class="btn-mini btn-edit" onclick='editRecord(${JSON.stringify(rec)})'>Edit</button>
                <button class="btn-mini btn-delete" onclick="deleteRecord('${rec.id}')">Delete</button>
              </td>
            `;
            tbody.appendChild(tr);
          });
        } else {
          tbody.innerHTML = "<tr><td colspan='5' style='text-align:center;padding:20px'>No records found</td></tr>";
        }
      } catch {
        document.getElementById("recordsBody").innerHTML = "<tr><td colspan='5'>Error loading records</td></tr>";
      }
    }

    document.getElementById("searchBtn").onclick = searchRecords;
    document.getElementById("clearBtn").onclick = () => {
      document.getElementById("searchName").value = "";
      searchRecords();
    };

    // Initial
    searchRecords();
    loadStatus();
  </script>
</body>
</html>
